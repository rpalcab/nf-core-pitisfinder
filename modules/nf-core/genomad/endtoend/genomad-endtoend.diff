Changes in component 'nf-core/genomad/endtoend'
'modules/nf-core/genomad/endtoend/meta.yml' is unchanged
'modules/nf-core/genomad/endtoend/environment.yml' is unchanged
Changes in 'genomad/endtoend/main.nf':
--- modules/nf-core/genomad/endtoend/main.nf
+++ modules/nf-core/genomad/endtoend/main.nf
@@ -1,6 +1,6 @@
 process GENOMAD_ENDTOEND {
     tag "$meta.id"
-    label 'process_high'
+    label 'process_medium'
 
     conda "${moduleDir}/environment.yml"
     container "${ workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ?
@@ -12,20 +12,20 @@
     path  genomad_db
 
     output:
-    tuple val(meta), path("*_aggregated_classification/*_aggregated_classification.tsv")    , emit: aggregated_classification   , optional: true
-    tuple val(meta), path("*_annotate/*_taxonomy.tsv")                                      , emit: taxonomy
-    tuple val(meta), path("*_find_proviruses/*_provirus.tsv")                               , emit: provirus
-    tuple val(meta), path("*_score_calibration/*_compositions.tsv")                         , emit: compositions                , optional: true
-    tuple val(meta), path("*_score_calibration/*_calibrated_aggregated_classification.tsv") , emit: calibrated_classification   , optional: true
-    tuple val(meta), path("*_summary/*_plasmid.fna.gz")                                     , emit: plasmid_fasta
-    tuple val(meta), path("*_summary/*_plasmid_genes.tsv")                                  , emit: plasmid_genes
-    tuple val(meta), path("*_summary/*_plasmid_proteins.faa.gz")                            , emit: plasmid_proteins
-    tuple val(meta), path("*_summary/*_plasmid_summary.tsv")                                , emit: plasmid_summary
-    tuple val(meta), path("*_summary/*_virus.fna.gz")                                       , emit: virus_fasta
-    tuple val(meta), path("*_summary/*_virus_genes.tsv")                                    , emit: virus_genes
-    tuple val(meta), path("*_summary/*_virus_proteins.faa.gz")                              , emit: virus_proteins
-    tuple val(meta), path("*_summary/*_virus_summary.tsv")                                  , emit: virus_summary
-    path "versions.yml"                                                                     , emit: versions
+    tuple val(meta), path("${meta.id}/*_aggregated_classification/*_aggregated_classification.tsv")    , emit: aggregated_classification   , optional: true
+    tuple val(meta), path("${meta.id}/*_annotate/*_taxonomy.tsv")                                      , emit: taxonomy
+    tuple val(meta), path("${meta.id}/*_find_proviruses/*_provirus.tsv")                               , emit: provirus
+    tuple val(meta), path("${meta.id}/*_score_calibration/*_compositions.tsv")                         , emit: compositions                , optional: true
+    tuple val(meta), path("${meta.id}/*_score_calibration/*_calibrated_aggregated_classification.tsv") , emit: calibrated_classification   , optional: true
+    tuple val(meta), path("${meta.id}/*_summary/*_plasmid.fna.gz")                                     , emit: plasmid_fasta
+    tuple val(meta), path("${meta.id}/*_summary/*_plasmid_genes.tsv")                                  , emit: plasmid_genes
+    tuple val(meta), path("${meta.id}/*_summary/*_plasmid_proteins.faa.gz")                            , emit: plasmid_proteins
+    tuple val(meta), path("${meta.id}/*_summary/*_plasmid_summary.tsv")                                , emit: plasmid_summary
+    tuple val(meta), path("${meta.id}/*_summary/*_virus.fna.gz")                                       , emit: virus_fasta
+    tuple val(meta), path("${meta.id}/*_summary/*_virus_genes.tsv")                                    , emit: virus_genes
+    tuple val(meta), path("${meta.id}/*_summary/*_virus_proteins.faa.gz")                              , emit: virus_proteins
+    tuple val(meta), path("${meta.id}/*_summary/*_virus_summary.tsv")                                  , emit: virus_summary
+    path "versions.yml"                                                                                , emit: versions
 
     when:
     task.ext.when == null || task.ext.when
@@ -37,13 +37,13 @@
     genomad \\
         end-to-end \\
         $fasta \\
-        ./ \\
+        $prefix \\
         $genomad_db \\
         --threads $task.cpus \\
         $args
 
-    gzip ./**/*.fna
-    gzip ./**/*.faa
+    gzip $prefix/**/*.fna
+    gzip $prefix/**/*.faa
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":
@@ -56,26 +56,26 @@
     def prefix = task.ext.prefix ?: "${meta.id}"
     def filename = "${fasta}"[0..<"${fasta}".lastIndexOf('.')]
     """
-    mkdir ${filename}_aggregated_classification
-    touch ${filename}_aggregated_classification/${filename}_aggregated_classification.tsv
-    mkdir ${filename}_annotate
-    touch ${filename}_annotate/${filename}_taxonomy.tsv
-    mkdir ${filename}_find_proviruses
-    touch ${filename}_find_proviruses/${filename}_provirus.tsv
-    mkdir ${filename}_marker_classification
-    mkdir ${filename}_nn_classification
-    mkdir ${filename}_score_calibration
-    touch ${filename}_score_calibration/${filename}_calibrated_aggregated_classification.tsv
-    touch ${filename}_score_calibration/${filename}_compositions.tsv
-    mkdir ${filename}_summary
-    touch ${filename}_summary/${filename}_plasmid.fna.gz
-    touch ${filename}_summary/${filename}_plasmid_genes.tsv
-    touch ${filename}_summary/${filename}_plasmid_proteins.faa.gz
-    touch ${filename}_summary/${filename}_plasmid_summary.tsv
-    touch ${filename}_summary/${filename}_virus.fna.gz
-    touch ${filename}_summary/${filename}_virus_genes.tsv
-    touch ${filename}_summary/${filename}_virus_proteins.faa.gz
-    touch ${filename}_summary/${filename}_virus_summary.tsv
+    mkdir $prefix/${filename}_aggregated_classification
+    touch $prefix/${filename}_aggregated_classification/${filename}_aggregated_classification.tsv
+    mkdir $prefix/${filename}_annotate
+    touch $prefix/${filename}_annotate/${filename}_taxonomy.tsv
+    mkdir $prefix/${filename}_find_proviruses
+    touch $prefix/${filename}_find_proviruses/${filename}_provirus.tsv
+    mkdir $prefix/${filename}_marker_classification
+    mkdir $prefix/${filename}_nn_classification
+    mkdir $prefix/${filename}_score_calibration
+    touch $prefix/${filename}_score_calibration/${filename}_calibrated_aggregated_classification.tsv
+    touch $prefix/${filename}_score_calibration/${filename}_compositions.tsv
+    mkdir $prefix/${filename}_summary
+    touch $prefix/${filename}_summary/${filename}_plasmid.fna.gz
+    touch $prefix/${filename}_summary/${filename}_plasmid_genes.tsv
+    touch $prefix/${filename}_summary/${filename}_plasmid_proteins.faa.gz
+    touch $prefix/${filename}_summary/${filename}_plasmid_summary.tsv
+    touch $prefix/${filename}_summary/${filename}_virus.fna.gz
+    touch $prefix/${filename}_summary/${filename}_virus_genes.tsv
+    touch $prefix/${filename}_summary/${filename}_virus_proteins.faa.gz
+    touch $prefix/${filename}_summary/${filename}_virus_summary.tsv
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":

'modules/nf-core/genomad/endtoend/tests/main.nf.test.snap' is unchanged
'modules/nf-core/genomad/endtoend/tests/main.nf.test' is unchanged
'modules/nf-core/genomad/endtoend/tests/nextflow.config' is unchanged
************************************************************
